generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum WalletType {
  ESCROW
  FLEET
  VENDOR
}

enum WalletStatus {
  ACTIVE
  SUSPENDED
}

enum WalletDirection {
  CREDIT
  DEBIT
}

model WalletAccount {
  id           String              @id @default(cuid())
  orgId        String
  balance      Decimal             @default(0)
  currency     String
  type         WalletType
  status       WalletStatus        @default(ACTIVE)
  transactions WalletTransaction[]
  createdAt    DateTime            @default(now())
  updatedAt    DateTime            @updatedAt
}

model WalletTransaction {
  id          String           @id @default(cuid())
  walletId    String
  wallet      WalletAccount    @relation(fields: [walletId], references: [id], onDelete: Cascade)
  direction   WalletDirection
  amount      Decimal          @default(0)
  currency    String
  reference   String?
  source      String?
  metadata    Json?
  occurredAt  DateTime         @default(now())
  createdAt   DateTime         @default(now())
  updatedAt   DateTime         @updatedAt
}

